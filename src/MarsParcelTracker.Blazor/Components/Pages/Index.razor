@page "/vvvv"
@using MarsParcelTracking.Application
@using MarsParcelTracking.Domain
@inject IParcelService parcelService
@inject NavigationManager Navigation

<div class="hero-section">
    <h1>Mars Parcel Tracker</h1>
    <p>Track your interplanetary deliveries with ease</p>

    <div class="search-container">
        <input @bind="barcode" placeholder="Enter barcode" class="search-input" />
        <button @onclick="SearchParcel" class="btn btn-primary">Track Package</button>
    </div>
   
</div>

@code {
    private string barcode = string.Empty;
    private ParcelDTO searchResults = null;
    private string errorMessage = string.Empty;

    private async Task SearchParcel()
    {
        if (string.IsNullOrWhiteSpace(barcode))
        {
            errorMessage = "Please enter a barcode";
            return;
        }

        searchResults = await parcelService.GetParcelAsync(barcode);

        if (searchResults==null)
        {
            errorMessage = "No parcels found with that tracking number";
        }
        else
        {
            errorMessage = string.Empty;
        }
    }
}